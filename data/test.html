<div class="content_div" style="height: auto !important;">
    <center>

        <h3><a href="https://www.itdaan.com/blog/2016/04/03/730973.html" style="color:black">TCP的三次握手</a></h3>
    </center>
    <input type="hidden" name="voteNum" value="100">
    <div class="postinfo">




        本文转载自

        <i class="icon-user"></i>&nbsp;<span>wan_ghuan</span>
        <i class="icon-globe"></i>&nbsp;<a href="https://www.itdaan.com/go/aHR0cDovL3d3dy5jbmJsb2dzLmNvbS93YW5odWFuL3AvNTM1MDk4NS5odG1s" target="_blank">查看原文</a>

        <i class="icon-time"></i>&nbsp;<span>2016-04-03</span>
        <i class="icon-eye-open"></i>&nbsp;<span>9&nbsp;</span>

        <i class="icon-tag"></i>&nbsp;



        <span><a href="https://www.itdaan.com/tag/tcp.html" target="_blank">tcp</a>/</span>



        <span><a href="https://www.itdaan.com/tag/三次握手.html" target="_blank">三次握手</a></span>


        &nbsp;&nbsp;<!--<button class="btn btn-success btn-mini btn-collection">收藏</button>-->
        &nbsp;&nbsp;<span id="votes" style="cursor: pointer;"><img alt="1" src="../../../../img/star-on.png?rand=1" title="很差 -2分">&nbsp;<img alt="2" src="../../../../img/star-on.png?rand=1" title="较差 -1分">&nbsp;<img alt="3" src="../../../../img/star-on.png?rand=1" title="一般 0分">&nbsp;<img alt="4" src="../../../../img/star-off.png?rand=1" title="还行 1分">&nbsp;<img alt="5" src="../../../../img/star-off.png?rand=1" title="很好 2分"><input name="score" type="hidden" value="3"></span>&nbsp;&nbsp;<span id="hint"></span>
        &nbsp;&nbsp;
        <!--
        <button class="btn btn-danger btn-mini btn-delete" data-id="730973">删除</button>
        -->
    </div>
    <hr>

    <div class="ad_title_down" style="height: 0px;">
        <input type="hidden" name="recommend_title" value="" id="recommend_title">
        <input type="hidden" name="recommend_url" value="" id="recommend_url">
        <!-- itdaan_横幅 -->
        <ins class="adsbygoogle" style="display: block; height: 0px;" data-ad-client="ca-pub-4353345653789615" data-ad-slot="5202993478" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display: inline-table; border: none; height: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 758px; background-color: transparent;"><ins id="aswift_1_anchor" style="display: block; border: none; height: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 758px; background-color: transparent; overflow: hidden; transition: opacity 1s cubic-bezier(0.4, 0, 1, 1) 0s, width 0.2s cubic-bezier(0.4, 0, 1, 1) 0.3s, height 0.5s cubic-bezier(0.4, 0, 1, 1) 0s; opacity: 0;"><iframe id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;border:0;width:758px;height:280px;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="758" height="280" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-4353345653789615&amp;output=html&amp;h=280&amp;slotname=5202993478&amp;adk=76023040&amp;adf=2693686656&amp;pi=t.ma~as.5202993478&amp;w=758&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1603971246&amp;rafmt=1&amp;psa=1&amp;guci=2.2.0.0.2.2.0.0&amp;format=758x280&amp;url=https%3A%2F%2Fwww.itdaan.com%2Fblog%2F2016%2F04%2F03%2F730973.html&amp;flash=0&amp;fwr=0&amp;fwrattr=true&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;uach=WyJXaW5kb3dzIiwiMTAuMCIsIng4NiIsIiIsIjg2LjAuNDI0MC4xMTEiLFtdXQ..&amp;dt=1603971245465&amp;bpp=72&amp;bdt=2454&amp;idt=1114&amp;shv=r20201026&amp;cbv=r20190131&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3Da66fbb80511ede41%3AT%3D1602233265%3AS%3DALNI_MZ73Uwmxlqb4DFqudgmjmWVvF10xQ&amp;prev_fmts=0x0&amp;nras=1&amp;correlator=8692668694627&amp;frm=20&amp;pv=1&amp;ga_vid=121663445.1602233266&amp;ga_sid=1603971246&amp;ga_hid=1741598035&amp;ga_fc=0&amp;iag=0&amp;icsg=42081276&amp;dssz=23&amp;mdo=0&amp;mso=8&amp;u_tz=480&amp;u_his=1&amp;u_java=0&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1040&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=373&amp;ady=238&amp;biw=1903&amp;bih=937&amp;scr_x=0&amp;scr_y=0&amp;eid=21067467%2C21068084%2C21067494&amp;oid=3&amp;pvsid=4225567025507134&amp;pem=356&amp;rx=0&amp;eae=0&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C1920%2C0%2C1920%2C1040%2C1920%2C937&amp;vis=1&amp;rsz=%7C%7CoeE%7C&amp;abl=CS&amp;pfx=0&amp;fu=8328&amp;bc=31&amp;ifi=1&amp;uci=a!1&amp;fsb=1&amp;xpc=YY4MvanGdV&amp;p=https%3A//www.itdaan.com&amp;dtd=1214" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!1" data-google-query-id="CPXekMTa2ewCFfJLFQgdB80B4w" data-load-complete="true"></iframe></ins></ins></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>

    </div>
    <div class="media-body" id="content_div">


        <h2>第一次握手</h2>
        <p>客户端调用connect，向服务端发送连接请求报文。该报文是一个特殊报文，报文首部同步位SYN=1，同时确认位ACK=0，seq=x表示确认字段的值为x,该字段值由客户端选择，表示客户端向服务端发送数据的第一个字节编号为x+1。连接报文发送后，客户端的TCP连接状态由CLOSED转为SYN_SENT。</p>
        <p>服务端调用accept，从lisent的连接请求队列中取出一个连接请求，并为之创建套接字和分配资源，开始建立连接。服务端的TCP连接状态由LISENT转为SYN_RCVD。</p>
        <p><a href="https://www.itdaan.com/link/aHR0cDovL2ltYWdlczIwMTUuY25ibG9ncy5jb20vYmxvZy85MjI1MjEvMjAxNjA0LzkyMjUyMS0yMDE2MDQwMzIyMTYzNzg3OS0xODk2MjI3Nzg1LnBuZw==" rel="nofollow noopener" target="_blank"><img title="QQ截图2" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="QQ截图2" src="https://www.itdaan.com/go/aHR0cHM6Ly9pbWFnZXMyMDE1LmNuYmxvZ3MuY29tL2Jsb2cvOTIyNTIxLzIwMTYwNC85MjI1MjEtMjAxNjA0MDMyMjE2Mzk4MzItMTY2MDA0NTAxNy5wbmc=" width="536" height="578" referrerpolicy="no-referrer"></a></p>
        <h2>第二次握手</h2>
        <p>服务端为连接分配资源，同意连接，向客户端发送SYN=1的确认报文。ACK=1表示确认号字段ack的值有效，ack=x+1表示希望收到第一个字节编号为x+1的若干数据，seq=y表示服务端向客户端发送数据的起始字节编号为y+1。客户端收到确认，TCP连接状态由SYN_SENT转为ESTABLISHED。</p>
        <ins class="adsbygoogle" style="display: block; text-align: center; height: 0px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4353345653789615" data-ad-slot="8840342077" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display: inline-table; border: none; height: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 758px; background-color: transparent;"><ins id="aswift_2_anchor" style="display: block; border: none; height: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; width: 758px; background-color: transparent; overflow: hidden; transition: opacity 1s cubic-bezier(0.4, 0, 1, 1) 0s, width 0.2s cubic-bezier(0.4, 0, 1, 1) 0.3s, height 0.5s cubic-bezier(0.4, 0, 1, 1) 0s; opacity: 0;"><iframe id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;border:0;width:758px;height:190px;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="758" height="190" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-4353345653789615&amp;output=html&amp;h=190&amp;slotname=8840342077&amp;adk=3697260208&amp;adf=3964066570&amp;pi=t.ma~as.8840342077&amp;w=758&amp;fwrn=4&amp;lmt=1603971246&amp;rafmt=11&amp;psa=1&amp;guci=2.2.0.0.2.2.0.0&amp;format=758x190&amp;url=https%3A%2F%2Fwww.itdaan.com%2Fblog%2F2016%2F04%2F03%2F730973.html&amp;flash=0&amp;wgl=1&amp;uach=WyJXaW5kb3dzIiwiMTAuMCIsIng4NiIsIiIsIjg2LjAuNDI0MC4xMTEiLFtdXQ..&amp;dt=1603971245537&amp;bpp=31&amp;bdt=2527&amp;idt=1381&amp;shv=r20201026&amp;cbv=r20190131&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3Da66fbb80511ede41%3AT%3D1602233265%3AS%3DALNI_MZ73Uwmxlqb4DFqudgmjmWVvF10xQ&amp;prev_fmts=0x0%2C758x280&amp;nras=1&amp;correlator=8692668694627&amp;frm=20&amp;pv=1&amp;ga_vid=121663445.1602233266&amp;ga_sid=1603971246&amp;ga_hid=1741598035&amp;ga_fc=0&amp;iag=0&amp;icsg=42081276&amp;dssz=23&amp;mdo=0&amp;mso=8&amp;rplot=4&amp;u_tz=480&amp;u_his=1&amp;u_java=0&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1040&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=373&amp;ady=1406&amp;biw=1903&amp;bih=937&amp;scr_x=0&amp;scr_y=0&amp;eid=21067467%2C21068084%2C21067494&amp;oid=3&amp;pvsid=4225567025507134&amp;pem=356&amp;rx=0&amp;eae=0&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C1920%2C0%2C1920%2C1040%2C1920%2C937&amp;vis=1&amp;rsz=%7C%7CoeEbr%7C&amp;abl=CS&amp;pfx=0&amp;fu=8328&amp;bc=31&amp;ifi=2&amp;uci=a!2&amp;btvi=1&amp;fsb=1&amp;xpc=kSxf7Z4d2P&amp;p=https%3A//www.itdaan.com&amp;dtd=1474" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!2" data-google-query-id="CKa7tcTa2ewCFcSqcQodSiUCmQ" data-load-complete="true"></iframe></ins></ins></ins>
        <script>     (adsbygoogle = window.adsbygoogle || []).push({});</script>
        <h2>第三次握手</h2>
        <p>客户端TCP连接状态转为ESTABLISHED，立即向服务器发送确认报文，connect函数返回，连接建立成功。</p>
        <p>服务端收到客户端的确认报文，TCP连接状态由SYN_RCVD转为ESTABLISHED，accept函数返回。</p>
        <p>至此一个连接的三次握手结束，连接建立，客户端可以和服务端进行可靠通信。</p>


    </div>
    <!-- <img alt="关注微信公众号" src="https://www.itdaan.com/img/weixin_public_white.jpg" width="100%">-->

    <ins class="adsbygoogle" style="display: block; height: 454px;" data-ad-format="autorelaxed" data-ad-client="ca-pub-4353345653789615" data-ad-slot="5874745610" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:454px;margin:0;padding:0;position:relative;visibility:visible;width:758px;background-color:transparent;"><ins id="aswift_3_anchor" style="display:block;border:none;height:454px;margin:0;padding:0;position:relative;visibility:visible;width:758px;background-color:transparent;"><iframe id="aswift_3" name="aswift_3" style="left:0;position:absolute;top:0;border:0;width:758px;height:454px;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="758" height="454" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-4353345653789615&amp;output=html&amp;h=454&amp;slotname=5874745610&amp;adk=2661829903&amp;adf=2555147040&amp;pi=t.ma~as.5874745610&amp;w=758&amp;cr_col=4&amp;cr_row=2&amp;fwrn=2&amp;lmt=1603971247&amp;rafmt=9&amp;psa=1&amp;guci=2.2.0.0.2.2.0.0&amp;format=758x454&amp;url=https%3A%2F%2Fwww.itdaan.com%2Fblog%2F2016%2F04%2F03%2F730973.html&amp;flash=0&amp;crui=image_stacked&amp;fwr=0&amp;wgl=1&amp;uach=WyJXaW5kb3dzIiwiMTAuMCIsIng4NiIsIiIsIjg2LjAuNDI0MC4xMTEiLFtdXQ..&amp;dt=1603971245569&amp;bpp=7&amp;bdt=2559&amp;idt=1579&amp;shv=r20201026&amp;cbv=r20190131&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3Da66fbb80511ede41-2201479d6ac40008%3AT%3D1603971248%3ART%3D1603971248%3AS%3DALNI_MYwYlMG_S4VpyKSoXP2DaGFN2DG3A&amp;prev_fmts=0x0%2C758x280%2C758x190&amp;nras=1&amp;correlator=8692668694627&amp;frm=20&amp;pv=1&amp;ga_vid=121663445.1602233266&amp;ga_sid=1603971246&amp;ga_hid=1741598035&amp;ga_fc=0&amp;iag=0&amp;icsg=42081276&amp;dssz=23&amp;mdo=0&amp;mso=8&amp;u_tz=480&amp;u_his=1&amp;u_java=0&amp;u_h=1080&amp;u_w=1920&amp;u_ah=1040&amp;u_aw=1920&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=373&amp;ady=1746&amp;biw=1903&amp;bih=937&amp;scr_x=0&amp;scr_y=0&amp;eid=21067467%2C21068084%2C21067494&amp;oid=3&amp;pvsid=4225567025507134&amp;pem=356&amp;rx=0&amp;eae=0&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C1920%2C0%2C1920%2C1040%2C1920%2C937&amp;vis=1&amp;rsz=%7C%7CoeEbr%7C&amp;abl=CS&amp;pfx=0&amp;fu=8328&amp;bc=31&amp;ifi=3&amp;uci=a!3&amp;btvi=2&amp;fsb=1&amp;xpc=fDdbQDpejh&amp;p=https%3A//www.itdaan.com&amp;dtd=1597" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!3" data-google-query-id="CLPot8Ta2ewCFdPA5godix4BWQ" data-load-complete="true"></iframe></ins></ins></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>